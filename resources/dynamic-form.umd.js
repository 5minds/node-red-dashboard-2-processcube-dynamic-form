(function(){"use strict";try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".dynamic-form-wrapper[data-v-19b58e9c]{padding:10px;margin:10px;border:1px solid black}.dynamic-form-class[data-v-19b58e9c]{color:green;font-weight:700}h1[data-v-19b58e9c]{margin-bottom:10px}h2[data-v-19b58e9c]{margin-top:1.5rem;margin-bottom:.75rem}h3[data-v-19b58e9c]{margin-top:1rem}p[data-v-19b58e9c]{margin-bottom:5px}ul li[data-v-19b58e9c]{list-style-type:circle;list-style-position:inside;margin-left:15px}pre[data-v-19b58e9c]{padding:12px;margin:12px;background-color:#eee}code[data-v-19b58e9c]{font-size:.825rem;color:#ae0000}")),document.head.appendChild(e)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}})();
(function(s,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("vuex")):typeof define=="function"&&define.amd?define(["exports","vue","vuex"],e):(s=typeof globalThis<"u"?globalThis:s||self,e(s["dynamic-form"]={},s.Vue,s.vuex))})(this,function(s,e,p){"use strict";const f=(t,o)=>{const i=t.__vccOpts||t;for(const[r,l]of o)i[r]=l;return i},h={name:"DynamicForm",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(t){console.info("DynamicForm setup with:",t),console.debug("Vue function loaded correctly",e.markRaw)},data(){return{form:{},formData:{}}},computed:{...p.mapState("data",["messages"]),fields(){return(this.messages&&this.messages[this.id]?this.messages[this.id].payload.formFields:[]).map(i=>({...i,component:i.type}))},hasFields(){return this.messages&&this.messages[this.id]&&this.messages[this.id].payload.formFields},waiting_title(){return this.props.waiting_title||"Warten auf den Usertask..."},waiting_info(){return this.props.waiting_info||"Der Usertask wird automatisch angezeigt, wenn ein entsprechender Task vorhanden ist."},submit_title(){return this.props.submit_title||"Submit your task"},cancel_title(){return this.props.cancel_title||"Cancel your task"}},mounted(){this.$socket.on("widget-load:"+this.id,t=>{this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.on("msg-input:"+this.id,t=>{if(console.info(t),t.payload.formFields){const o=t.payload.formFields.reduce((i,r)=>(console.info("field:",r),console.info("field.id:",r.id),i[r.id]=r.value||"",i),{});console.info("formData: ",o),console.info("this.formData (1):",this.formData),this.formData=o,console.info("this.formData (2):",this.formData)}this.$store.commit("data/bind",{widgetId:this.id,msg:t})}),this.$socket.emit("widget-load",this.id)},unmounted(){var t,o;(t=this.$socket)==null||t.off("widget-load"+this.id),(o=this.$socket)==null||o.off("msg-input:"+this.id)},methods:{send(t){this.$socket.emit("widget-action",this.id,t)},submit(){this.send({payload:this.formData})},cancel(){this.send({payload:this.formData})}}},_={className:"dynamic-form-wrapper"},u={key:0},k={key:1};function y(t,o,i,r,l,a){const c=e.resolveComponent("v-col"),d=e.resolveComponent("v-row"),m=e.resolveComponent("v-btn"),w=e.resolveComponent("v-form"),g=e.resolveComponent("v-alert");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createCommentVNode(" Component must be wrapped in a block so props such as className and style can be passed in from parent "),e.createElementVNode("div",_,[a.hasFields?(e.openBlock(),e.createElementBlock("p",u,[e.createVNode(w,{ref:"form",modelValue:l.form,"onUpdate:modelValue":o[0]||(o[0]=n=>l.form=n)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.fields,(n,C)=>(e.openBlock(),e.createBlock(d,{key:C},{default:e.withCtx(()=>[e.createVNode(c,{cols:"12"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(n.component),{id:n.id,modelValue:l.formData[n.id],"onUpdate:modelValue":D=>l.formData[n.id]=D,required:n.required,items:n.items,label:n.label},null,8,["id","modelValue","onUpdate:modelValue","required","items","label"]))]),_:2},1024)]),_:2},1024))),128)),e.createVNode(d,null,{default:e.withCtx(()=>[e.createVNode(c,{cols:"6"},{default:e.withCtx(()=>[e.createVNode(m,{variant:"outlined",block:"",onClick:a.cancel},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.cancel_title),1)]),_:1},8,["onClick"])]),_:1}),e.createVNode(c,{cols:"6"},{default:e.withCtx(()=>[e.createVNode(m,{block:"",onClick:a.submit},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(a.submit_title),1)]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])):(e.openBlock(),e.createElementBlock("p",k,[e.createVNode(g,{text:a.waiting_info,title:a.waiting_title},null,8,["text","title"])]))])],2112)}const b=f(h,[["render",y],["__scopeId","data-v-19b58e9c"],["__file","/Users/moellenbeck/projects/moellenbeck/reps/node-red-dashboard-2-ui-example/ui/components/DynamicForm.vue"]]);s.DynamicForm=b,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=dynamic-form.umd.js.map
